<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `CpuPool` struct in crate `futures_cpupool`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, CpuPool">

    <title>futures_cpupool::CpuPool - Rust</title>

    <link rel="stylesheet" type="text/css" href="../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../main.css">
    

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'><a href='index.html'>futures_cpupool</a></p><script>window.sidebarCurrent = {name: 'CpuPool', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content struct">
<h1 class='fqn'><span class='in-band'>Struct <a href='index.html'>futures_cpupool</a>::<wbr><a class='struct' href=''>CpuPool</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a id='src-14' class='srclink' href='../src/futures_cpupool/lib.rs.html#72-74' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct CpuPool { /* fields omitted */ }</pre><div class='docblock'><p>A thread pool intended to run CPU intensive work.</p>

<p>This thread pool will hand out futures representing the completed work
that happens on the thread pool itself, and the futures can then be later
composed with other work as part of an overall computation.</p>

<p>The worker threads associated with a thread pool are kept alive so long as
there is an open handle to the <code>CpuPool</code> or there is work running on them. Once
all work has been drained and all references have gone away the worker
threads will be shut down.</p>

<p>Currently <code>CpuPool</code> implements <code>Clone</code> which just clones a new reference to
the underlying thread pool.</p>

<p><strong>Note:</strong> if you use CpuPool inside a library it&#39;s better accept a
<code>Builder</code> object for thread configuration rather than configuring just
pool size.  This not only future proof for other settings but also allows
user to attach monitoring tools to lifecycle hooks.</p>
</div><h2 id='methods'>Methods</h2><h3 class='impl'><span class='in-band'><code>impl <a class='struct' href='../futures_cpupool/struct.CpuPool.html' title='futures_cpupool::CpuPool'>CpuPool</a></code></span><span class='out-of-band'><div class='ghost'></div><a id='src-44' class='srclink' href='../src/futures_cpupool/lib.rs.html#121-202' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.new' class='method'><span id='new.v' class='invisible'><code>fn <a href='#method.new' class='fnname'>new</a>(size: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>) -&gt; <a class='struct' href='../futures_cpupool/struct.CpuPool.html' title='futures_cpupool::CpuPool'>CpuPool</a></code></span></h4>
<div class='docblock'><p>Creates a new thread pool with <code>size</code> worker threads associated with it.</p>

<p>The returned handle can use <code>execute</code> to run work on this thread pool,
and clones can be made of it to get multiple references to the same
thread pool.</p>

<p>This is a shortcut for:
<code>rust Builder::new().pool_size(size).create()</code></p>
</div><h4 id='method.new_num_cpus' class='method'><span id='new_num_cpus.v' class='invisible'><code>fn <a href='#method.new_num_cpus' class='fnname'>new_num_cpus</a>() -&gt; <a class='struct' href='../futures_cpupool/struct.CpuPool.html' title='futures_cpupool::CpuPool'>CpuPool</a></code></span></h4>
<div class='docblock'><p>Creates a new thread pool with a number of workers equal to the number
of CPUs on the host.</p>

<p>This is a shortcut for:
<code>rust Builder::new().create()</code></p>
</div><h4 id='method.spawn' class='method'><span id='spawn.v' class='invisible'><code>fn <a href='#method.spawn' class='fnname'>spawn</a>&lt;F&gt;(&amp;self, f: F) -&gt; <a class='struct' href='../futures_cpupool/struct.CpuFuture.html' title='futures_cpupool::CpuFuture'>CpuFuture</a>&lt;F::Item, F::Error&gt; <span class='where'>where F: <a class='trait' href='../futures/future/trait.Future.html' title='futures::future::Future'>Future</a> + <a class='trait' href='https://doc.rust-lang.org/nightly/core/marker/trait.Send.html' title='core::marker::Send'>Send</a> + 'static, F::Item: <a class='trait' href='https://doc.rust-lang.org/nightly/core/marker/trait.Send.html' title='core::marker::Send'>Send</a> + 'static, F::Error: <a class='trait' href='https://doc.rust-lang.org/nightly/core/marker/trait.Send.html' title='core::marker::Send'>Send</a> + 'static</span></code></span></h4>
<div class='docblock'><p>Spawns a future to run on this thread pool, returning a future
representing the produced value.</p>

<p>This function will execute the future <code>f</code> on the associated thread
pool, and return a future representing the finished computation. The
returned future serves as a proxy to the computation that <code>F</code> is
running.</p>

<p>To simply run an arbitrary closure on a thread pool and extract the
result, you can use the <code>futures::lazy</code> combinator to defer work to
executing on the thread pool itself.</p>

<p>Note that if the future <code>f</code> panics it will be caught by default and the
returned future will propagate the panic. That is, panics will not tear
down the thread pool and will be propagated to the returned future&#39;s
<code>poll</code> method if queried.</p>

<p>If the returned future is dropped then this <code>CpuPool</code> will attempt to
cancel the computation, if possible. That is, if the computation is in
the middle of working, it will be interrupted when possible.</p>
</div><h4 id='method.spawn_fn' class='method'><span id='spawn_fn.v' class='invisible'><code>fn <a href='#method.spawn_fn' class='fnname'>spawn_fn</a>&lt;F, R&gt;(&amp;self, f: F) -&gt; <a class='struct' href='../futures_cpupool/struct.CpuFuture.html' title='futures_cpupool::CpuFuture'>CpuFuture</a>&lt;R::Item, R::Error&gt; <span class='where'>where F: <a class='trait' href='https://doc.rust-lang.org/nightly/core/ops/trait.FnOnce.html' title='core::ops::FnOnce'>FnOnce</a>() -&gt; R + <a class='trait' href='https://doc.rust-lang.org/nightly/core/marker/trait.Send.html' title='core::marker::Send'>Send</a> + 'static, R: <a class='trait' href='../futures/future/trait.IntoFuture.html' title='futures::future::IntoFuture'>IntoFuture</a> + 'static, R::Future: <a class='trait' href='https://doc.rust-lang.org/nightly/core/marker/trait.Send.html' title='core::marker::Send'>Send</a> + 'static, R::Item: <a class='trait' href='https://doc.rust-lang.org/nightly/core/marker/trait.Send.html' title='core::marker::Send'>Send</a> + 'static, R::Error: <a class='trait' href='https://doc.rust-lang.org/nightly/core/marker/trait.Send.html' title='core::marker::Send'>Send</a> + 'static</span></code></span></h4>
<div class='docblock'><p>Spawns a closure on this thread pool.</p>

<p>This function is a convenience wrapper around the <code>spawn</code> function above
for running a closure wrapped in <code>futures::lazy</code>. It will spawn the
function <code>f</code> provided onto the thread pool, and continue to run the
future returned by <code>f</code> on the thread pool as well.</p>

<p>The returned future will be a handle to the result produced by the
future that <code>f</code> returns.</p>
</div></div><h2 id='implementations'>Trait Implementations</h2><h3 class='impl'><span class='in-band'><code>impl <a class='trait' href='https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html' title='core::clone::Clone'>Clone</a> for <a class='struct' href='../futures_cpupool/struct.CpuPool.html' title='futures_cpupool::CpuPool'>CpuPool</a></code></span><span class='out-of-band'><div class='ghost'></div><a id='src-67' class='srclink' href='../src/futures_cpupool/lib.rs.html#215-220' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.clone' class='method'><span id='clone.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#tymethod.clone' class='fnname'>clone</a>(&amp;self) -&gt; <a class='struct' href='../futures_cpupool/struct.CpuPool.html' title='futures_cpupool::CpuPool'>CpuPool</a></code></span></h4>
<div class='docblock'><p>Returns a copy of the value. <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#tymethod.clone">Read more</a></p>
</div><h4 id='method.clone_from' class='method'><span id='clone_from.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#method.clone_from' class='fnname'>clone_from</a>(&amp;mut self, source: &amp;Self)</code><div class='since' title='Stable since Rust version 1.0.0'>1.0.0</div></span></h4>
<div class='docblock'><p>Performs copy-assignment from <code>source</code>. <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#method.clone_from">Read more</a></p>
</div></div><h3 class='impl'><span class='in-band'><code>impl <a class='trait' href='https://doc.rust-lang.org/nightly/core/ops/trait.Drop.html' title='core::ops::Drop'>Drop</a> for <a class='struct' href='../futures_cpupool/struct.CpuPool.html' title='futures_cpupool::CpuPool'>CpuPool</a></code></span><span class='out-of-band'><div class='ghost'></div><a id='src-70' class='srclink' href='../src/futures_cpupool/lib.rs.html#222-230' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.drop' class='method'><span id='drop.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/ops/trait.Drop.html#tymethod.drop' class='fnname'>drop</a>(&amp;mut self)</code></span></h4>
<div class='docblock'><p>A method called when the value goes out of scope. <a href="https://doc.rust-lang.org/nightly/core/ops/trait.Drop.html#tymethod.drop">Read more</a></p>
</div></div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "futures_cpupool";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    <script defer src="../search-index.js"></script>
</body>
</html>